<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lễ Tốt Nghiệp - Trần Minh Đức</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

  <!-- Font tiếng Việt -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body {
      scroll-behavior: smooth;
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-800">

  <!-- Banner -->
  <section class="relative w-full h-[70vh] flex items-center justify-center text-center" data-aos="fade-down">
    <img src="images/banner.webp" alt="Banner Bách Khoa" class="absolute inset-0 w-full h-full object-cover">
    <div class="absolute inset-0 bg-gradient-to-b from-[#9d1d1f]/95 to-[#9d1d1f]/60"></div>

    <!-- Logo -->
    <div class="absolute top-4 left-4 z-20 flex items-center space-x-3">
      <img src="images/logo.webp" alt="Logo BKHN" class="h-14 sm:h-16 drop-shadow-lg">
      <div class="text-white text-left">
        <p class="font-bold text-lg sm:text-xl">ĐẠI HỌC BÁCH KHOA HÀ NỘI</p>
        <p class="text-xs sm:text-sm">Hanoi University of Science and Technology</p>
      </div>
    </div>

    <!-- Nội dung chính -->
    <div class="relative z-10 text-white px-4">
      <h1 class="text-3xl sm:text-5xl font-bold mb-3 drop-shadow-lg">🎓 Graduation Ceremony</h1>
      <h2 class="text-2xl sm:text-4xl mb-4 font-semibold drop-shadow-md">Trần Minh Đức</h2>
      <p class="mb-4 text-sm sm:text-lg font-medium drop-shadow-md">
        Ngày 28/09/2025 – Hội trường C2, HUST
      </p>
      <!-- Countdown -->
      <div id="countdown" class="flex justify-center space-x-2 sm:space-x-4 mt-6 px-2"></div>
    </div>
  </section>

	<!-- Timeline -->
	<section class="max-w-2xl mx-auto py-8 sm:py-12 px-4 bg-white shadow-md rounded-xl sm:rounded-2xl mt-6 sm:mt-12"
		data-aos="fade-up">
		<h3 class="text-xl sm:text-2xl font-semibold mb-4 sm:mb-6 text-center text-[#9d1d1f]">📅 Timeline</h3>
		<p class="text-center text-2xl sm:text-3xl font-extrabold 
							bg-gradient-to-r from-red-500 via-yellow-300 to-red-600 
							bg-clip-text text-transparent animate-shimmer">
			✨ 14h đến 17h - ngày 28/9✨
		</p>
		<p class="text-center text-lg sm:text-xl mt-3 text-gray-800">
			Có gì liên hệ <a href="tel:0348026103" class="font-bold text-[#9d1d1f] underline decoration-wavy">0348026103</a> nhé
			mọi người!
		</p>
	</section>

	<style>
		@keyframes shimmer {
			0% {
				background-position: -500px 0;
			}

			100% {
				background-position: 500px 0;
			}
		}

	.animate-shimmer {
		background-size: 1000px 100%;
		animation: shimmer 3s infinite linear;
	}
</style>

  <!-- Memories - Albums -->
  <section class="max-w-5xl mx-auto py-8 sm:py-12 px-4 bg-white shadow-md rounded-xl sm:rounded-2xl mt-6 sm:mt-12"
    data-aos="fade-up">
    <h3 class="text-xl sm:text-2xl font-semibold mb-4 sm:mb-6 text-center text-[#9d1d1f]">📸 Ảnh kỷ niệm</h3>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      <!-- Album 1 -->
      <div onclick="openAlbum(0)" class="cursor-pointer bg-gray-50 shadow-lg rounded-lg overflow-hidden hover:scale-105 transition">
        <img src="images/sv1.webp" class="w-full h-48 object-cover">
        <p class="text-center py-3 font-medium">Album - Khoảnh khắc tuổi trẻ</p>
      </div>

      <!-- Album 2 -->
      <div onclick="openAlbum(1)" class="cursor-pointer bg-gray-50 shadow-lg rounded-lg overflow-hidden hover:scale-105 transition">
        <img src="images/svtn1.webp" class="w-full h-48 object-cover">
        <p class="text-center py-3 font-medium">Album - Sinh viên tình nguyện</p>
      </div>

      <!-- Album 3 -->
      <div onclick="openAlbum(2)" class="cursor-pointer bg-gray-50 shadow-lg rounded-lg overflow-hidden hover:scale-105 transition">
        <img src="images/tn5.webp" class="w-full h-48 object-cover">
        <p class="text-center py-3 font-medium">Album - Dấu ấn tốt nghiệp</p>
      </div>

      <!-- Album 4 -->
      <div onclick="openAlbum(3)" class="cursor-pointer bg-gray-50 shadow-lg rounded-lg overflow-hidden hover:scale-105 transition">
        <img src="images/good1.webp" class="w-full h-48 object-cover">
        <p class="text-center py-3 font-medium">Album - Niềm vui gặt hái</p>
      </div>
    </div>
  </section>

	<!-- Lightbox -->
	<div id="lightbox" class="fixed inset-0 bg-black bg-opacity-90 hidden flex-col items-center justify-center z-50 p-4">
		<!-- Top bar -->
		<div class="w-full flex justify-between items-center text-white mb-4">
			<span onclick="closeLightbox()" class="text-2xl sm:text-3xl font-bold cursor-pointer">&times;</span>
			<button id="gridToggle" onclick="toggleGrid()"
				class="hidden bg-white/20 hover:bg-white/40 px-3 py-1 rounded text-sm sm:text-base">
				Xem tất cả
			</button>
		</div>

		<!-- Slideshow mode -->
		<div id="lightbox-slideshow" class="flex items-center justify-center w-full h-full relative">
			<span onclick="prevImage()"
				class="absolute left-2 sm:left-6 text-white text-3xl sm:text-5xl font-bold cursor-pointer select-none">&#10094;</span>
			<img id="lightbox-img" src="" class="max-h-[80%] max-w-[90%] rounded-lg shadow-lg mx-auto">
			<span onclick="nextImage()"
				class="absolute right-2 sm:right-6 text-white text-3xl sm:text-5xl font-bold cursor-pointer select-none">&#10095;</span>
		</div>

		<!-- Grid mode -->
		<div id="lightbox-grid"
			class="hidden grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 overflow-y-auto max-h-[80%] w-full px-2">
			<!-- Ảnh sẽ được inject bằng JS -->
		</div>
	</div>

	<!-- Location -->
	<section
		class="max-w-full sm:max-w-3xl mx-auto py-8 sm:py-12 px-4 bg-white shadow-md rounded-xl sm:rounded-2xl mt-6 sm:mt-12 text-center"
		data-aos="zoom-in">
		<h3 class="text-xl sm:text-2xl font-semibold mb-4 sm:mb-6 text-[#9d1d1f]">📍 Địa điểm chụp hình</h3>

		<p class="mt-2 sm:mt-4 text-xl sm:text-2xl font-extrabold 
							bg-gradient-to-r from-yellow-300 via-red-500 to-pink-500 
							bg-clip-text text-transparent animate-shimmer leading-relaxed">
			🎓 Đài phun nước – Mọi người đến chỗ này nhé <br> Đi theo bản đồ bên dưới, please!!!
		</p>

		<div class="mt-4 sm:mt-6 flex justify-center">
			<img src="images/map.webp" alt="Hình thực tế hội trường C2" onclick="openSingleImage('images/map.webp')"
				class="rounded-xl shadow-lg max-h-40 sm:max-h-64 object-cover cursor-pointer hover:scale-105 transition">
		</div>

		<a href="https://maps.app.goo.gl/nkHGLPhLCowjKTN19" target="_blank"
			class="inline-block mt-4 sm:mt-6 bg-[#9d1d1f] text-white px-4 py-2 rounded-lg shadow hover:bg-red-900 transition text-sm sm:text-base">
			📍 Mở Google Maps
		</a>
	</section>

	<style>
		@keyframes shimmer {
			0% {
				background-position: -500px 0;
			}

			100% {
				background-position: 500px 0;
			}
		}

		.animate-shimmer {
			background-size: 1000px 100%;
			animation: shimmer 3s infinite linear;
		}
	</style>

  <!-- Confirm -->
  <section class="text-center py-8 sm:py-12 px-4 bg-white shadow-md rounded-xl sm:rounded-2xl mt-6 sm:mt-12 max-w-xl mx-auto"
    data-aos="flip-left">
    <h3 class="text-xl sm:text-2xl font-semibold mb-4 text-[#9d1d1f]">✅ Xác nhận tham dự</h3>
    <input id="guestName" type="text" placeholder="Nhập tên của bạn"
      class="border rounded-lg px-3 py-2 sm:px-4 sm:py-2 w-48 sm:w-64 mb-4 shadow-sm text-sm sm:text-base">
    <br>
    <button onclick="submitConfirm()"
      class="bg-[#9d1d1f] text-white px-4 py-2 sm:px-6 sm:py-3 rounded-lg shadow hover:bg-red-900 transition text-sm sm:text-base">
      Gửi xác nhận
    </button>
    <p id="confirmMessage" class="mt-3 sm:mt-4 font-semibold text-sm sm:text-base"></p>
  </section>

  <!-- Footer -->
  <footer class="text-center py-6 bg-gray-100 mt-8 sm:mt-12 text-sm sm:text-base text-[#9d1d1f]">
    <p>Cảm ơn vì đã đến chung vui cùng mình! 💖</p>
  </footer>

	<!-- Lightbox JS -->
	<script>
		const albums = [
			["images/sv1.webp", "images/sv2.webp", "images/sv3.webp", "images/sv4.webp", "images/sv5.webp", "images/sv6.webp", "images/sv7.webp", "images/sv8.webp", "images/sv9.webp", "images/sv10.webp", "images/sv11.webp", "images/sv12.webp"],
			["images/svtn1.webp", "images/svtn2.webp", "images/svtn3.webp", "images/svtn4.webp", "images/svtn5.webp"],
			["images/tn1.webp", "images/tn2.webp", "images/tn3.webp", "images/tn4.webp", "images/tn5.webp", "images/tn6.webp"],
			["images/good1.webp", "images/good2.webp", "images/good3.webp", "images/good4.webp", "images/good5.webp"]
		];

		let currentAlbum = [];
		let currentIndex = 0;
		let mode = "slideshow";
		let isAlbum = false;

		function openAlbum(albumIndex) {
			currentAlbum = albums[albumIndex];
			isAlbum = true;
			openLightbox(currentAlbum[0]);
			document.getElementById("gridToggle").classList.remove("hidden");
		}

		function openSingleImage(src) {
			currentAlbum = [src];
			isAlbum = false;
			mode = "slideshow";
			openLightbox(src);
			document.getElementById("gridToggle").classList.add("hidden");
		}

		function openLightbox(src) {
			currentIndex = currentAlbum.indexOf(src);
			if (currentIndex < 0) currentIndex = 0;
			document.getElementById("lightbox").classList.remove("hidden");
			showSlideshow();
		}

		function closeLightbox() {
			document.getElementById("lightbox").classList.add("hidden");
		}

		function prevImage() {
			if (mode !== "slideshow") return;
			currentIndex = (currentIndex - 1 + currentAlbum.length) % currentAlbum.length;
			document.getElementById("lightbox-img").src = currentAlbum[currentIndex];
		}

		function nextImage() {
			if (mode !== "slideshow") return;
			currentIndex = (currentIndex + 1) % currentAlbum.length;
			document.getElementById("lightbox-img").src = currentAlbum[currentIndex];
		}

		function toggleGrid() {
			if (mode === "slideshow") {
				showGrid();
			} else {
				showSlideshow();
			}
		}

		function showSlideshow() {
			mode = "slideshow";
			document.getElementById("lightbox-grid").classList.add("hidden");
			document.getElementById("lightbox-slideshow").classList.remove("hidden");
			if (isAlbum) document.getElementById("gridToggle").innerText = "Xem tất cả";
			document.getElementById("lightbox-img").src = currentAlbum[currentIndex];
		}

		function showGrid() {
			mode = "grid";
			document.getElementById("lightbox-slideshow").classList.add("hidden");
			document.getElementById("lightbox-grid").classList.remove("hidden");
			if (isAlbum) document.getElementById("gridToggle").innerText = "Trở lại";
			const grid = document.getElementById("lightbox-grid");
			grid.innerHTML = "";
			currentAlbum.forEach((img, i) => {
				const el = document.createElement("img");
				el.src = img;
				el.className = "w-full h-32 sm:h-40 object-cover rounded-lg cursor-pointer hover:scale-105 transition";
				el.onclick = () => { currentIndex = i; showSlideshow(); };
				grid.appendChild(el);
			});
		}

		document.getElementById("lightbox").addEventListener("click", function (e) {
			if (e.target.id === "lightbox") closeLightbox();
		});

		document.addEventListener("keydown", function (e) {
			if (!document.getElementById("lightbox").classList.contains("hidden")) {
				if (mode === "slideshow") {
					if (e.key === "ArrowLeft") prevImage();
					if (e.key === "ArrowRight") nextImage();
				}
				if (e.key === "Escape") closeLightbox();
			}
		});

		// 👇 Thêm vuốt trượt trên điện thoại
		let startX = 0;
		const lightboxImg = document.getElementById("lightbox-img");

		lightboxImg.addEventListener("touchstart", (e) => {
			startX = e.touches[0].clientX;
		});

		lightboxImg.addEventListener("touchend", (e) => {
			const endX = e.changedTouches[0].clientX;
			const diffX = endX - startX;

			if (Math.abs(diffX) > 50) { // Vuốt đủ xa mới tính
				if (diffX > 0) {
					prevImage(); // Vuốt sang phải → ảnh trước
				} else {
					nextImage(); // Vuốt sang trái → ảnh sau
				}
			}
		});
	</script>

  <!-- Fireworks Canvas -->
  <canvas id="fireworksCanvas" class="fixed inset-0 pointer-events-none z-50"></canvas>
  <script>
    const canvas = document.getElementById("fireworksCanvas");
    const ctx = canvas.getContext("2d");
    let particles = [];
    let w, h;
    function resizeCanvas() { w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; }
    window.addEventListener("resize", resizeCanvas); resizeCanvas();
    class Particle {
      constructor(x, y, color) {
        this.x = x; this.y = y; this.color = color;
        this.speedX = (Math.random() - 0.5) * 6;
        this.speedY = (Math.random() - 0.5) * 6;
        this.alpha = 1;
      }
      update() { this.x += this.speedX; this.y += this.speedY; this.alpha -= 0.02; }
      draw() { ctx.globalAlpha = this.alpha; ctx.fillStyle = this.color; ctx.beginPath(); ctx.arc(this.x, this.y, 3, 0, Math.PI * 2); ctx.fill(); ctx.globalAlpha = 1; }
    }
    function createFirework(x, y) {
      const colors = ["#ff1d25", "#ffd700", "#ffffff", "#9d1d1f"];
      for (let i = 0; i < 50; i++) particles.push(new Particle(x, y, colors[Math.floor(Math.random() * colors.length)]));
    }
    function animate() {
      ctx.clearRect(0, 0, w, h);
      particles.forEach((p, i) => { p.update(); p.draw(); if (p.alpha <= 0) particles.splice(i, 1); });
      requestAnimationFrame(animate);
    }
    animate();
    function triggerFireworks() {
      for (let i = 0; i < 5; i++) setTimeout(() => { createFirework(Math.random() * w, Math.random() * h / 2 + h / 4); }, i * 400);
    }
    window.triggerFireworks = triggerFireworks;
  </script>

  <!-- Firebase Confirm -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp }
      from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBItVx0nvuhsKhczv1ApGdt4mJwPONr1ZQ",
      authDomain: "graduation-confirm.firebaseapp.com",
      projectId: "graduation-confirm",
      storageBucket: "graduation-confirm.appspot.com",
      messagingSenderId: "687249613419",
      appId: "1:687249613419:web:6f577b769067f8be0f072e",
      measurementId: "G-7LM9DL98FG"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function submitConfirm() {
      const name = document.getElementById("guestName").value.trim();
      const msg = document.getElementById("confirmMessage");
      if (!name) {
        msg.innerText = "⚠️ Vui lòng nhập tên trước!";
        msg.className = "mt-3 sm:mt-4 font-semibold text-red-600";
        return;
      }
      try {
        await addDoc(collection(db, "guests"), { name: name, time: serverTimestamp() });
        msg.innerText = "🎉 Xác nhận thành công!";
        msg.className = "mt-3 sm:mt-4 font-semibold text-green-600";
        document.getElementById("guestName").value = "";
        triggerFireworks();
      } catch (e) {
        console.error("Lỗi ghi Firestore: ", e);
        msg.innerText = "❌ Không thể lưu dữ liệu!";
        msg.className = "mt-3 sm:mt-4 font-semibold text-red-600";
      }
    }
    window.submitConfirm = submitConfirm;
  </script>

  <!-- Countdown -->
  <script>
    const eventDate = new Date("Sep 28, 2025 14:00:00").getTime();
    const countdown = document.getElementById("countdown");

    function updateCountdown() {
      const now = new Date().getTime();
      const distance = eventDate - now;

      if (distance < 0) {
        countdown.innerHTML = `<div class="text-xl sm:text-2xl font-bold text-green-300">🎉 Lễ đã bắt đầu!</div>`;
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const mins = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const secs = Math.floor((distance % (1000 * 60)) / 1000);

      countdown.innerHTML = `
        <div class="bg-gradient-to-r from-red-700 to-red-600 text-white px-2 py-2 sm:px-4 sm:py-3 rounded-xl shadow-2xl text-center w-16 sm:w-24">
          <div class="text-lg sm:text-3xl font-extrabold">${days}</div><div class="text-xs sm:text-sm uppercase">Ngày</div>
        </div>
        <div class="bg-gradient-to-r from-red-700 to-red-600 text-white px-2 py-2 sm:px-4 sm:py-3 rounded-xl shadow-2xl text-center w-16 sm:w-24">
          <div class="text-lg sm:text-3xl font-extrabold">${hours}</div><div class="text-xs sm:text-sm uppercase">Giờ</div>
        </div>
        <div class="bg-gradient-to-r from-red-700 to-red-600 text-white px-2 py-2 sm:px-4 sm:py-3 rounded-xl shadow-2xl text-center w-16 sm:w-24">
          <div class="text-lg sm:text-3xl font-extrabold">${mins}</div><div class="text-xs sm:text-sm uppercase">Phút</div>
        </div>
        <div class="bg-gradient-to-r from-red-700 to-red-600 text-white px-2 py-2 sm:px-4 sm:py-3 rounded-xl shadow-2xl text-center w-16 sm:w-24">
          <div class="text-lg sm:text-3xl font-extrabold">${secs}</div><div class="text-xs sm:text-sm uppercase">Giây</div>
        </div>`;
    }
    updateCountdown();
    setInterval(updateCountdown, 1000);
  </script>

  <!-- AOS -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>AOS.init();</script>

</body>

</html>
